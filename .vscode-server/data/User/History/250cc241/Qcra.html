<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¤œç´¢botè©•ä¾¡ãƒšãƒ¼ã‚¸</title>

    <link rel="stylesheet" href="static/style.css" type="text/css">
</head>

<!--  style="text-align:center" -->

<body>
    <script src="https://unpkg.com/vue@next"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <div id = "app">
        <div>
            <p>æ¤œç´¢botã‚’ä½¿ã£ã¦ãã‚Œã¦ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ğŸ˜„</p>
            <div>Q1ï¼šç·åˆè©•ä¾¡ã‚’æ•™ãˆã¦ãã ã•ã„</div>
            <div>
                <div v-bind:class="{'star-gold':stars[0], 'star-gray':!stars[0]}" v-on:click="star(1)" class="pointer size-30">â˜…</div>
                <div v-bind:class="{'star-gold':stars[1], 'star-gray':!stars[1]}" v-on:click="star(2)" class="pointer size-30">â˜…</div>
                <div v-bind:class="{'star-gold':stars[2], 'star-gray':!stars[2]}" v-on:click="star(3)" class="pointer size-30">â˜…</div>
                <div v-bind:class="{'star-gold':stars[3], 'star-gray':!stars[3]}" v-on:click="star(4)" class="pointer size-30">â˜…</div>
                <div v-bind:class="{'star-gold':stars[4], 'star-gray':!stars[4]}" v-on:click="star(5)" class="pointer size-30">â˜…</div>
            </div>
        </div>

        <div>
            <div>Q2ï¼šè‡ªç”±ã«æ„Ÿæƒ³ã‚’è¨˜å…¥ã—ã¦ãã ã•ã„</div>
            <div>
                <textarea v-model="comment" cols="40" rows="4"></textarea> <!-- v-on:hogehogeï¼ˆå…¥åŠ›ã«é–¢ã™ã‚‹å‡¦ç†ã®æ„ŸçŸ¥ï¼‰ã§isActive()ã‚’trueã« -->
            </div>
        </div>
        
        <div>
            <input v-bind:disabled="comment==''" v-on:click="submit()" type="submit" value="é€ä¿¡" class="pointer size-15">
        </div>
    </div>

</body>
</html>

<script>
    let stars = [false, false, false, false, false];

    const Star = {
        data() {
            return {
                stars,
                rate: 0,
                comment: ""
            }
        },
        methods: {
            star: function(num) {
                this.rate = num
                // 1~numç•ªç›®ã¾ã§ã‚’trueã«ç½®ãæ›ãˆã‚‹å‡¦ç†
                for (let i=0; i<num; i++) {
                    this.stars.splice(i, 1, true)
                }
                // num+1~5ç•ªç›®ã¾ã§ã‚’falseã«ç½®ãæ›ãˆã‚‹å‡¦ç†
                for (let i=num; i<5; i++) {
                    this.stars.splice(i, 1, false)
                }
            },
            submit: function() {
                alert("é€ä¿¡å®Œäº†")

                axios.post('/test1', {
                    rate: this.rate,
                    comment: this.comment
                })
                .then(function(response) {
                    console.log(response)
                })
                .catch(function(error) {
                    console.log(error)
                })

                window.open('/test2', null)
            }
        }
    }
    Vue.createApp(Star).mount("#app")
</script>
